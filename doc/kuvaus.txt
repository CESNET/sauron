
Sauron - relational database based DNS/DHCP management system


Key requirements for the system:

    - support for storing data for multiple servers 
    - automatic generation of DNS (BIND) configuration files from the database
    - automatic generation of DHCP configuration files from the database
    - automatic generation of Unix printcap file(s) from the database
    - graphical front-end (WWW) for end-users
    - restricted/fully customizable access for end-users to the data
    - graphical & command-line/scriptable administrative access
    - store other (administrative) data about hosts
    - ...more to be added :)

General System organization:

  ---------------           ----------         ---------------
 |   database    | <-----> | back-end | <---> | WWW front-end |
 | (PostgresSQL) |         |  (perl)  |   |   |	(perl/CGI/PHP)|
  ---------------           ----------	  |    ---------------
			                  |
    ^  			       ^          |    ---------------
    |			       |	  |-> | possible X11  |
    |			       |	  |   | front-end     |
    |	  ----------------     |          |    ---------------
     --> | administrative | <--		  |
	 | tools (perl,	  |		   ->  ....
	 | C/C++ ?)       |		
	  ----------------		
			       

Database layout (tables):

 main tables hierarchy:

     -------				     -------           
    |Servers|				    |Groups | 
     -------				     -------
        ^					^
        |					|
	|					|
     -------	   -------    ------		|
    | Zones |	  |  WKS  |  |  MX  |		|
     -------	   -------    ------		|
        ^	      ^		^		|
	|	      |		|		|
	|	      |		|		|
     -------          |		|		|
    | Hosts |-----------------------------------
     -------
        ^
        |
	|
     -------		   ------
    |   A   |	- - - ->  | Nets |
     -------		   ------

---

Eli p‰‰hierarkia on: server <-- zone <-- host <-- A(ddress). 
Ja aina useita tietueita kussakin taulussa voi olla linkitetty ylemm‰n
tason taulun yhteen tietueeseen.
Yleinen idea on, ett‰ kullakin tasolla m‰‰ritellyt kent‰t (attribuutit)
periytyv‰t alemmille tasoille (ellei alemmilla tasoilla ole uudelleen
m‰‰ritelty kyseist‰ kentt‰‰). Esimerkiksi. hostmasterin email osoite
periytyy server-tietueesta sen zone-tietueille jos sit‰ ei ole
zone-tietueessa m‰‰ritelty uudelleen.

Hosts-talun tietueet jakautuvat 6 p‰‰tyyppiin:
   - host
   - subdomain delegation
   - glue record (subdomain delegation A records)
   - mx subdomain (plain MX entry)
   - alias (CNAME), link to another hosts record or domainname (as static
                    text for out-of-zone aliases)
   - printer (printer/spool not in DNS)

Hosts-taulun tietue voi olla linkitetty (kuulua) yhteen ryhm‰‰n (group).
Ryhm‰t ovat serveri kohtaisia ja voivat si‰lt‰‰ mm. DHCP/PRINTER m‰‰rityksi‰.

Kaikki DNS:n RR:t (resource records) voidaan suoraan m‰‰ritt‰‰
hosts-taulun tietueissa, lukuun ottamatta MX ja WKS. Joita ei voi
suoraan m‰‰ritt‰‰, vaan tarvittaessa voidaan linkitt‰‰ host-tietue
johonkin MX/WKS taulun tietueeseen. Sill‰ kone kohtaiset MX/WKS rivit
ovat yleens‰ samat saman tyyppisille laitteille tai esimerkiksi saman
subdomainin sis‰ll‰. N‰in voidaan yll‰pit‰‰ pient‰ ryhm‰‰ erilaisia
profiileja WKS/MX asetuksille ja muutokset profiileihin p‰ivittyv‰t
automaattisesti kaikkille hosteille.

---

 other (global) tables:

     -------		 -----------------    
    | Users |		| printer_classes |
     -------		 -----------------
	^
	|
	|
     -------
    | Privs |
     -------		


 template tables:

    various tables to contain templates for zone/host/mx/wks entries
    (yet to be determined)

---

Users-taulu sis‰lt‰‰ k‰ytt‰j‰tunnukset j‰rjestelm‰‰n. Privs-taulussa
on allow/deny tyylisi‰ tietueita, jotka on linkitetty k‰ytt‰j‰‰n,
jotka m‰‰ritt‰v‰t k‰ytt‰j‰n oikeudet.

Printer_classes-taulu sis‰lt‰‰ printcap tyyliset globaalit printeri
tyyppim‰‰ritykset, joihin voidaan viitata PRINTER kentiss‰ hosts/group
tauluissa.

---


